# フェーズ 4: CLI と開発者体験 タスクリスト

> [!IMPORTANT]
> **テスト要件**: 各チェックリスト項目は、関連するテスト（既存または新規追加）がパスしたことを確認してから完了とし、次の項目に進んでください。

## 1. CLI `check` コマンド (`cli/main.py`)
- [x] **検証ロジックの実装**
    - [x] 設定を読み込み、タスクを検出する（実行はしない）。
    - [x] **インポートチェック**: すべての `callable` パスがインポート可能か検証する。
    - [x] **シグネチャチェック**: タスク関数のシグネチャを検査する。
        - [x] 必須引数が `inputs` で提供されているか、`ctx` で利用可能か検証する。
        - [x] `inputs` 内の未知の引数について警告する。
    - [x] **到達可能性チェック**: グラフの接続性を検証する（意図しない孤立ノードがないか）。
    - [x] **サイクル検出**: グラフ内の循環依存をチェックする。
- [x] **出力レポート**
    - [x] チェックの概要（Pass/Fail）を出力する。
    - [x] 重大なチェックが失敗した場合、非ゼロのコードで終了する。

## 2. CLI パラメータの上書き (`cli/main.py`)
- [x] **CLI 引数の追加**
    - [x] `--param key=value` のサポートを追加する（`nargs='*'` を使用）。
- [x] **解析と適用**
    - [x] `key=value` 文字列を辞書に解析する。
    - [x] CLI パラメータを `flow_conf.defaults` にマージする（CLI優先）。
    - [x] マージされたパラメータを `Engine.run` に渡す。

## 3. Cute モードの強化 (`trace/console.py`)
- [x] **アニメーションの改善**
    - [x] 「hop」アニメーション（例: `A -> B` の視覚化）を実装する。
    - [x] ノードの状態（実行中、完了、失敗）に応じて異なる絵文字を使用する。
- [x] **Fanout/Fanin の詳細**
    - [x] 並列実行を検出し、「fanout」メッセージをログ出力する。
    - [x] 並列ブランチがマージする際に「fanin」をログ出力する。
- [x] **タイミングの詳細**
    - [x] 期間が見やすくフォーマットされていることを確認する（ms/sec）。
